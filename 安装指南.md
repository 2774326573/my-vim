# 安装和使用指南

## ⚠️ 重要提示

配置文件已经就绪，但需要先安装插件才能使用所有功能。

## 📦 安装步骤

### 1. 安装插件

打开 Vim：
```bash
vim
```

在 Vim 中执行（忽略任何错误提示）：
```vim
:PlugInstall
```

等待所有插件安装完成（可能需要几分钟）。

### 2. 安装 Node.js（如果还没有）

coc.nvim 需要 Node.js：

```bash
# Ubuntu/Debian
sudo apt install nodejs npm

# 或使用 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install node
```

### 3. 安装语言服务器（可选）

在 Vim 中执行：
```vim
:CocInstall coc-pyright coc-tsserver coc-json coc-clangd
```

### 4. 安装推荐工具

```bash
# FZF (文件查找)
git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
~/.fzf/install

# Ripgrep (全文搜索)
# Ubuntu/Debian
sudo apt install ripgrep

# macOS
brew install ripgrep
```

## ✅ 验证安装

重新打开 Vim，应该看到漂亮的主题和状态栏：
```bash
vim
```

检查插件状态：
```vim
:PlugStatus
```

检查 Coc 状态：
```vim
:CocInfo
```

## 🚀 开始使用

### 第一次使用

1. 打开 Vim: `vim`
2. 查看快捷键列表：按 `Space` 键等待 500ms（如果安装了 which-key）
3. 或查看文档：`cat ~/vimfiles/速查卡.md`

### 常见操作

**文件操作**：
- `Space + e` - 打开文件树（需要先 `:PlugInstall` 安装 NERDTree）
- `Space + ff` - 查找文件（需要 FZF）
- `Space + fg` - 全文搜索（需要 ripgrep）

**编辑**：
- `gcc` - 注释当前行
- `Space + cf` - 格式化代码（需要 Coc）
- `gd` - 跳转到定义（需要 Coc）

**窗口**：
- `Ctrl + h/j/k/l` - 窗口导航
- `Space + ws` - 水平分屏
- `Space + wv` - 垂直分屏

## 🎨 主题切换

安装插件后，可以切换主题：
```vim
:ThemeTokyoNight    " Tokyo Night（默认）
:ThemeCatppuccin    " Catppuccin
:ThemeOneDark       " OneDark
:ThemeDracula       " Dracula
```

## 🐛 故障排查

### 问题：打开 Vim 看到很多错误
**解决**：忽略它们，执行 `:PlugInstall` 安装插件后重启 Vim。

### 问题：某些快捷键不工作
**解决**：
1. 检查插件是否安装：`:PlugStatus`
2. 检查插件是否加载：`:scriptnames`
3. 查看具体错误：`:messages`

### 问题：Coc 补全不工作
**解决**：
1. 检查 Node.js：`node --version`（需要 >= 14.14）
2. 检查 Coc 状态：`:CocInfo`
3. 安装语言服务器：`:CocInstall coc-pyright`

### 问题：FZF 查找不工作
**解决**：
1. 检查 FZF 是否安装：`fzf --version`
2. 检查插件：`:PlugStatus`
3. 手动安装：见上方"安装推荐工具"

### 问题：主题切换命令不存在
**解决**：先安装插件 `:PlugInstall`，主题命令会在插件安装后可用。

## 📚 学习资源

### 查看文档
```bash
# 快速参考
cat ~/vimfiles/速查卡.md

# 完整指南
cat ~/vimfiles/快捷键指南.md

# 在 Vim 中查看
vim ~/vimfiles/快捷键指南.md
```

### Vim 内置帮助
```vim
:help              " Vim 帮助（中文）
:Tutor             " Vim 教程
:h quickref        " 快速参考
:CocCommand        " Coc 命令列表
```

## 🎯 推荐学习路径

### 第 1 天：基础操作
- 学习移动：`h j k l`
- 学习模式：`i a o Esc`
- 保存退出：`:w :q :wq`
- 试试：`Space + e` 打开文件树

### 第 2 天：编辑命令
- 复制粘贴：`yy p dd`
- 撤销重做：`u Ctrl+r`
- 注释：`gcc`
- 试试：`Space + ff` 查找文件

### 第 3 天：代码导航
- 跳转定义：`gd`
- 查找引用：`gr`
- 文档查看：`K`
- 试试：`Space + fg` 全文搜索

### 第 4 天：高级编辑
- 包围符：`ysiw"` `cs"'` `ds"`
- 多光标：`Ctrl+n`
- 对齐：`ga`
- 试试：`Space + ca` 代码操作

### 第 5 天：工作流
- Git 操作：`Space + gg/gd/gc`
- Buffer 切换：`Shift+h/l`
- 窗口管理：`Ctrl+h/j/k/l`
- 试试：`Space + u` 撤销树

## ⚡ 快速启动命令

```bash
# 安装所有内容的完整命令
vim +'PlugInstall --sync' +qa
vim +'CocInstall -sync coc-pyright coc-tsserver coc-json' +qa

# 查看配置
cat ~/vimfiles/速查卡.md

# 开始使用
vim
```

## 💡 小贴士

1. **不要害怕错误**：第一次打开会有一些错误，安装插件后就好了
2. **循序渐进**：不需要一次记住所有快捷键，每天学几个
3. **查看帮助**：遇到问题用 `:help {keyword}` 查看帮助
4. **实践为主**：多用 Vim 编辑文件，肌肉记忆很重要
5. **自定义配置**：熟悉后可以修改 `~/vimfiles/config.vim` 自定义

## 🎉 开始你的 Vim 之旅！

现在就执行 `:PlugInstall` 安装插件，开始享受现代化的 Vim 编辑体验吧！

有问题请查看：
- 速查卡：`~/vimfiles/速查卡.md`
- 完整指南：`~/vimfiles/快捷键指南.md`
- README：`~/vimfiles/README.md`
