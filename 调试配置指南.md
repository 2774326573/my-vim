# Vimspector è°ƒè¯•é…ç½®è¯´æ˜Ž

## ðŸ“ é…ç½®æ–‡ä»¶ä½ç½®

å·²åˆ›å»ºçš„è°ƒè¯•é…ç½®ï¼š
- `/tmp/.vimspector.json` - ç¤ºä¾‹é…ç½®ï¼ˆç”¨äºŽæµ‹è¯•ï¼‰

ä½ éœ€è¦åœ¨**æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•**åˆ›å»º `.vimspector.json` æ–‡ä»¶ã€‚

## ðŸ“ åˆ›å»ºé…ç½®çš„ä¸‰ç§æ–¹æ³•

### æ–¹æ³• 1ï¼šå¿«é€Ÿåˆ›å»ºï¼ˆæŽ¨èï¼‰

åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼š

```bash
# Python é¡¹ç›®
cat > .vimspector.json << 'EOF'
{
  "configurations": {
    "Launch": {
      "adapter": "debugpy",
      "configuration": {
        "request": "launch",
        "program": "${file}"
      }
    }
  }
}
EOF

# C/C++ é¡¹ç›®
cat > .vimspector.json << 'EOF'
{
  "configurations": {
    "Launch": {
      "adapter": "vscode-cpptools",
      "configuration": {
        "request": "launch",
        "program": "${workspaceRoot}/a.out",
        "MIMode": "gdb"
      }
    }
  }
}
EOF
```

### æ–¹æ³• 2ï¼šå¤åˆ¶æ¨¡æ¿

```bash
# å¤åˆ¶é€šç”¨é…ç½®åˆ°ä½ çš„é¡¹ç›®
cp /tmp/.vimspector.json ~/your_project/

# æˆ–å¤åˆ¶åˆ°å½“å‰ç›®å½•
cp /tmp/.vimspector.json .
```

### æ–¹æ³• 3ï¼šä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆå·¥å…·

åœ¨ Vim ä¸­åˆ›å»ºå‡½æ•°è‡ªåŠ¨ç”Ÿæˆé…ç½®ï¼š

```vim
" åœ¨ ~/vimfiles/keymaps.vim æ·»åŠ å¿«æ·é”®
nnoremap <leader>dc :call CreateDebugConfig()<CR>
```

## ðŸŽ¯ æ”¯æŒçš„è¯­è¨€é…ç½®

### Python

```json
{
  "configurations": {
    "Python - Launch": {
      "adapter": "debugpy",
      "configuration": {
        "request": "launch",
        "program": "${file}",
        "stopOnEntry": false,
        "console": "integratedTerminal"
      }
    }
  }
}
```

**å˜é‡è¯´æ˜Ž**ï¼š
- `${file}` - å½“å‰æ‰“å¼€çš„æ–‡ä»¶
- `${workspaceRoot}` - é¡¹ç›®æ ¹ç›®å½•
- `args: []` - å‘½ä»¤è¡Œå‚æ•°

### C/C++

```json
{
  "configurations": {
    "C++ - Launch": {
      "adapter": "vscode-cpptools",
      "configuration": {
        "request": "launch",
        "program": "${workspaceRoot}/a.out",
        "args": [],
        "cwd": "${workspaceRoot}",
        "MIMode": "gdb"
      }
    }
  }
}
```

**æ³¨æ„**ï¼š
- ç¼–è¯‘æ—¶éœ€è¦ `-g` å‚æ•°ï¼š`g++ -g main.cpp -o a.out`
- `program` æŒ‡å‘ç¼–è¯‘åŽçš„å¯æ‰§è¡Œæ–‡ä»¶

### Node.js / JavaScript

```json
{
  "configurations": {
    "Node - Launch": {
      "adapter": "vscode-node",
      "configuration": {
        "request": "launch",
        "program": "${file}",
        "cwd": "${workspaceRoot}"
      }
    }
  }
}
```

### Go

```json
{
  "configurations": {
    "Go - Launch": {
      "adapter": "delve",
      "configuration": {
        "request": "launch",
        "program": "${file}",
        "mode": "debug"
      }
    }
  }
}
```

## ðŸ”§ é«˜çº§é…ç½®ç¤ºä¾‹

### Python å¸¦å‚æ•°

```json
{
  "configurations": {
    "Python with Args": {
      "adapter": "debugpy",
      "configuration": {
        "request": "launch",
        "program": "${file}",
        "args": ["--config", "config.json", "--verbose"],
        "env": {
          "DEBUG": "true"
        }
      }
    }
  }
}
```

### C++ CMake é¡¹ç›®

```json
{
  "configurations": {
    "C++ - CMake Debug": {
      "adapter": "vscode-cpptools",
      "configuration": {
        "request": "launch",
        "program": "${workspaceRoot}/build/Debug/my_program",
        "args": [],
        "cwd": "${workspaceRoot}",
        "MIMode": "gdb"
      }
    }
  }
}
```

### è¿œç¨‹è°ƒè¯•ï¼ˆPythonï¼‰

```json
{
  "configurations": {
    "Python - Attach Remote": {
      "adapter": "debugpy",
      "configuration": {
        "request": "attach",
        "host": "192.168.1.100",
        "port": 5678,
        "pathMappings": [
          {
            "localRoot": "${workspaceRoot}",
            "remoteRoot": "/app"
          }
        ]
      }
    }
  }
}
```

## ðŸ“‹ é…ç½®æ–‡ä»¶æ”¾ç½®ä½ç½®

### é¡¹ç›®çº§é…ç½®ï¼ˆæŽ¨èï¼‰

```
my_project/
â”œâ”€â”€ .vimspector.json    â† æ”¾è¿™é‡Œ
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ utils.py
â””â”€â”€ README.md
```

### å…¨å±€é…ç½®

ä¹Ÿå¯ä»¥åœ¨ `~/.vim/vimspector.json` åˆ›å»ºå…¨å±€é…ç½®ï¼Œä½†é¡¹ç›®çº§é…ç½®ä¼˜å…ˆçº§æ›´é«˜ã€‚

## ðŸš€ å¿«é€Ÿå¼€å§‹æµç¨‹

### 1. åˆ›å»ºé¡¹ç›®å’Œé…ç½®

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir my_python_project
cd my_python_project

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > .vimspector.json << 'EOF'
{
  "configurations": {
    "Launch": {
      "adapter": "debugpy",
      "configuration": {
        "request": "launch",
        "program": "${file}"
      }
    }
  }
}
EOF

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
cat > main.py << 'EOF'
def greet(name):
    message = f"Hello, {name}!"
    return message

if __name__ == "__main__":
    result = greet("World")
    print(result)
EOF
```

### 2. æ‰“å¼€ Vim è°ƒè¯•

```bash
vim main.py
```

### 3. åœ¨ Vim ä¸­è°ƒè¯•

```vim
" è®¾ç½®æ–­ç‚¹
:2
F9

" å¯åŠ¨è°ƒè¯•
F5

" å•æ­¥æ‰§è¡Œ
F10

" åœæ­¢
F3
```

## ðŸ’¡ å®žç”¨æŠ€å·§

### è‡ªåŠ¨åˆ›å»ºé…ç½®å‡½æ•°

åœ¨ `~/.vimfiles/plugin-config.vim` æ·»åŠ ï¼š

```vim
" è‡ªåŠ¨åˆ›å»ºè°ƒè¯•é…ç½®
function! CreatePythonDebugConfig()
  let config = {
    \ "configurations": {
    \   "Launch": {
    \     "adapter": "debugpy",
    \     "configuration": {
    \       "request": "launch",
    \       "program": "${file}"
    \     }
    \   }
    \ }
  \}
  call writefile([json_encode(config)], '.vimspector.json')
  echo "âœ… Created .vimspector.json"
endfunction

command! VimspectorCreatePython call CreatePythonDebugConfig()
```

ä½¿ç”¨ï¼š
```vim
:VimspectorCreatePython
```

### æ£€æµ‹å¹¶æç¤ºåˆ›å»ºé…ç½®

```vim
" å¯åŠ¨è°ƒè¯•æ—¶è‡ªåŠ¨æ£€æŸ¥é…ç½®
autocmd FileType python,cpp,c,javascript
  \ if !filereadable('.vimspector.json') && !filereadable(expand('~/.vim/vimspector.json')) |
  \   echohl WarningMsg |
  \   echo "âš ï¸  æœªæ‰¾åˆ° .vimspector.jsonï¼Œè¿è¡Œ :VimspectorCreatePython åˆ›å»º" |
  \   echohl None |
  \ endif
```

## ðŸ” é…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåº

Vimspector æŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾é…ç½®ï¼š

1. å½“å‰ç›®å½•çš„ `.vimspector.json`
2. çˆ¶ç›®å½•çš„ `.vimspector.json`ï¼ˆé€’å½’å‘ä¸Šï¼‰
3. `~/.vim/vimspector.json`ï¼ˆå…¨å±€é…ç½®ï¼‰

## ðŸ“š æ›´å¤šèµ„æº

- å®˜æ–¹ç¤ºä¾‹ï¼š`~/.vim/plugged/vimspector/support/test/`
- å®˜æ–¹æ–‡æ¡£ï¼š`:help vimspector`
- åœ¨çº¿ç¤ºä¾‹ï¼šhttps://github.com/puremourning/vimspector#configuration

## âœ… æµ‹è¯•ä½ çš„é…ç½®

```bash
# è¿›å…¥æµ‹è¯•ç›®å½•
cd /tmp

# æ‰“å¼€æµ‹è¯•æ–‡ä»¶ï¼ˆå·²æœ‰é…ç½®ï¼‰
vim test_python.py

# åœ¨ Vim ä¸­
:10    # è·³åˆ°ç¬¬ 10 è¡Œ
F9     # è®¾ç½®æ–­ç‚¹
F5     # å¯åŠ¨è°ƒè¯•
F10    # å•æ­¥æ‰§è¡Œ
```

---

**çŽ°åœ¨ä½ çŸ¥é“å¦‚ä½•ä¸ºä»»ä½•é¡¹ç›®åˆ›å»ºè°ƒè¯•é…ç½®äº†ï¼** ðŸŽ‰
